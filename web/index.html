<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Ollama</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="dark">
    <div class="app-container">
        <!-- Left Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <button id="new-chat-btn" class="new-chat-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"></path>
                    </svg>
                    <span class="new-chat-text">New chat</span>
                </button>
            </div>
            
            <div class="sidebar-nav">
                <div class="nav-item active">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                    Search chats
                </div>
                <div class="nav-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                    </svg>
                    Library
                </div>
                <div class="nav-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="16 18 22 12 16 6"></polyline>
                        <polyline points="8 6 2 12 8 18"></polyline>
                    </svg>
                    Codex
                </div>
                <div class="nav-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 12l2 2 4-4"></path>
                        <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"></path>
                        <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"></path>
                    </svg>
                    Sora
                </div>
                <div class="nav-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <polyline points="21,15 16,10 5,21"></polyline>
                    </svg>
                    GPTs
                </div>
                <div class="nav-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"></path>
                    </svg>
                    DALL-E
                </div>
            </div>

            <!-- Projects Section -->
            <div class="projects-section">
                <div class="projects-header">
                    <h3>Projects</h3>
                    <button class="projects-add-btn" title="Add Project">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"></path>
                        </svg>
                    </button>
                </div>
                <div class="projects-list">
                    <!-- Projects will be loaded dynamically from the backend -->
                </div>
            </div>

            <!-- Chats Section -->
            <div class="chats-section">
                <div class="chats-header">
                    <h3>Chats</h3>
                </div>
            </div>

            <div class="sidebar-sessions">
                <div id="sessions-list" class="sessions-list">
                    <!-- Sessions will be loaded here -->
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="user-menu">
                    <div class="user-info">
                        <div class="user-avatar">
                            <span id="status-dot" class="status-dot"></span>
                        </div>
                        <div class="user-details">
                            <span class="user-name">User</span>
                            <span id="status-text" class="user-status">Connecting...</span>
                        </div>
                    </div>
                    <button id="settings-btn" class="settings-btn" title="Settings">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <div class="main-header">
                <div class="header-left">
                    <button id="sidebar-toggle" class="sidebar-toggle-btn" title="Toggle sidebar">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 12h18M3 6h18M3 18h18"></path>
                        </svg>
                    </button>
                    <div class="model-selector">
                        <button class="model-selector-btn" id="model-selector-btn">
                            <span class="model-name" id="current-model-name">Loading...</span>
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" class="model-dropdown-icon">
                                <path d="M12.1338 5.94433C12.3919 5.77382 12.7434 5.80202 12.9707 6.02929C13.1979 6.25656 13.2261 6.60807 13.0556 6.8662L12.9707 6.9707L8.47067 11.4707C8.21097 11.7304 7.78896 11.7304 7.52926 11.4707L3.02926 6.9707L2.9443 6.8662C2.77379 6.60807 2.80199 6.25656 3.02926 6.02929C3.25653 5.80202 3.60804 5.77382 3.86617 5.94433L3.97067 6.02929L7.99996 10.0586L12.0293 6.02929L12.1338 5.94433Z"></path>
                            </svg>
                        </button>
                        <div class="model-dropdown" id="model-dropdown">
                            <div class="model-dropdown-content">
                                <!-- Model options will be populated by JavaScript -->
                            </div>
                        </div>
                        <!-- Hidden select for compatibility -->
                        <select id="model-select" style="display: none;">
                            <option value="">Loading...</option>
                        </select>
                    </div>
                </div>
                <div class="header-controls">
                    <button class="header-btn" title="Share">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="18" cy="5" r="3"></circle>
                            <circle cx="6" cy="12" r="3"></circle>
                            <circle cx="18" cy="19" r="3"></circle>
                            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="chat-area">
                <div id="chat-messages" class="chat-messages">
                    <div class="welcome-section">
                        <h1 class="welcome-title">What's on the agenda today?</h1>
                    </div>
                </div>

                <div class="chat-input-section">
                    <div class="input-container">
                        <div class="input-wrapper">
                            <div class="input-actions-left">
                                <button class="input-action-btn" title="Attach">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>
                                    </svg>
                                </button>
                            </div>
                            <textarea
                                id="message-input"
                                placeholder="Ask anything"
                                rows="1"
                            ></textarea>
                            <div class="input-actions-right">
                                <button class="input-action-btn" title="Voice">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
                                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                                        <line x1="12" y1="19" x2="12" y2="23"></line>
                                        <line x1="8" y1="23" x2="16" y2="23"></line>
                                    </svg>
                                </button>
                                <button id="send-btn" class="send-btn" disabled>
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M8.99992 16V6.41407L5.70696 9.70704C5.31643 10.0976 4.68342 10.0976 4.29289 9.70704C3.90237 9.31652 3.90237 8.6835 4.29289 8.29298L9.29289 3.29298L9.36907 3.22462C9.76184 2.90427 10.3408 2.92686 10.707 3.29298L15.707 8.29298L15.7753 8.36915C16.0957 8.76192 16.0731 9.34092 15.707 9.70704C15.3408 10.0732 14.7618 10.0958 14.3691 9.7754L14.2929 9.70704L10.9999 6.41407V16C10.9999 16.
5523 10.5522 17 9.99992 17C9.44764 17 8.99992 16.5523 8.99992 16Z"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="settings-modal">
        <div class="settings-content">
            <div class="settings-header">
                <h3>Settings</h3>
                <button id="close-settings" class="close-btn">×</button>
            </div>
            <div class="settings-body">
                <div class="setting-group">
                    <h4>Chat Settings</h4>
                    <div class="setting-item">
                        <label for="default-streaming">
                            <input type="checkbox" id="default-streaming" checked>
                            Enable streaming by default
                        </label>
                    </div>
                    <div class="setting-item">
                        <label for="auto-scroll">
                            <input type="checkbox" id="auto-scroll" checked>
                            Auto-scroll to new messages
                        </label>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h4>Interface</h4>
                    <div class="setting-item">
                        <label for="theme-select">Theme:</label>
                        <select id="theme-select">
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                            <option value="auto">Auto</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="sidebar-width">Sidebar Width:</label>
                        <select id="sidebar-width">
                            <option value="250">Narrow (250px)</option>
                            <option value="300" selected>Default (300px)</option>
                            <option value="350">Wide (350px)</option>
                        </select>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h4>Model Settings</h4>
                    <div class="setting-item">
                        <label for="temperature-slider">Temperature: <span id="temperature-value">0.7</span></label>
                        <input type="range" id="temperature-slider" min="0" max="2" step="0.1" value="0.7">
                    </div>
                    <div class="setting-item">
                        <label for="max-tokens">Max Tokens:</label>
                        <input type="number" id="max-tokens" min="1" max="4096" value="2048">
                    </div>
                </div>
                
                <div class="setting-group">
                    <h4>Model Management</h4>
                    
                    <!-- Simplified Model Management Tabs -->
                    <div class="model-management-tabs">
                        <button class="model-tab-btn active" data-tab="installed">My Models</button>
                        <button class="model-tab-btn" data-tab="add">Add Models</button>
                    </div>
                    
                    <!-- Installed Models Tab -->
                    <div id="installed-models-tab" class="model-tab-content active">
                        <div class="model-tab-header">
                            <button id="sync-models-btn" class="action-btn primary">🔄 Sync & Refresh</button>
                        </div>
                        
                        <div id="download-status" class="download-status" style="display: none;">
                            <div class="download-progress">
                                <div class="progress-bar">
                                    <div id="progress-fill" class="progress-fill"></div>
                                </div>
                                <div id="download-text" class="download-text">Preparing download...</div>
                            </div>
                        </div>
                        
                        <div class="models-container">
                            <div id="models-list" class="models-list-simplified">
                                <!-- Installed models will be loaded here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Add Models Tab -->
                    <div id="add-models-tab" class="model-tab-content">
                        <div class="model-tab-header">
                            <div class="download-input-group">
                                <input type="text" id="model-download-input" placeholder="Enter model name (e.g., llama3.2:3b, mistral:7b)" class="model-input">
                                <button id="download-model-btn" class="action-btn primary">📥 Download</button>
                            </div>
                        </div>
                        
                        <div class="available-models-section">
                            <div class="available-models-header">
                                <h5>Popular Models</h5>
                                <button id="refresh-available-models-btn" class="action-btn">🔄 Refresh</button>
                            </div>
                            
                            <div class="available-models-search">
                                <div class="search-input-wrapper">
                                    <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="11" cy="11" r="8"></circle>
                                        <path d="m21 21-4.35-4.35"></path>
                                    </svg>
                                    <input type="text" id="model-search-input" placeholder="Search models..." class="search-input">
                                    <button id="clear-search-btn" class="clear-search-btn" disabled>×</button>
                                </div>
                            </div>
                            
                            <div id="available-models-list" class="available-models-list">
                                <!-- Available models will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-confirmation-modal" class="delete-confirmation-modal">
        <div class="delete-confirmation-content">
            <div class="delete-confirmation-header">
                <h3 id="delete-modal-title">Delete project?</h3>
            </div>
            <div class="delete-confirmation-body">
                <p id="delete-modal-message">
                    This will permanently delete all project files and chats. To save chats, move them to your chat list or another project before deleting.
                </p>
            </div>
            <div class="delete-confirmation-actions">
                <button id="delete-modal-cancel" class="delete-btn-cancel">Cancel</button>
                <button id="delete-modal-confirm" class="delete-btn-confirm">Delete project</button>
            </div>
        </div>
    </div>

    <!-- Project Creation Modal -->
    <div id="project-creation-modal" class="project-creation-modal">
        <div class="project-creation-content">
            <div class="project-creation-header">
                <h3>Create New Project</h3>
            </div>
            <div class="project-creation-body">
                <p>Enter a name for your new project:</p>
                <input type="text" id="project-name-input" class="project-name-input" placeholder="Project name" maxlength="100">
            </div>
            <div class="project-creation-actions">
                <button id="project-modal-cancel" class="project-btn-cancel">Cancel</button>
                <button id="project-modal-confirm" class="project-btn-confirm">Create Project</button>
            </div>
        </div>
    </div>

    <script src="app.js?v=3"></script>
</body>
</html>